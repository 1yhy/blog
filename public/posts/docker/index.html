
















<!DOCTYPE html>
<html lang='zh-cn'><head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <link rel="shortcut icon" href='http://localhost:1313/favicon.ico' type="image/x-icon">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>CentOS 7安装Docker - 笨鸟先飞</title>

    
    <meta name="description" content="在CentOS 7上安装Docker" />
    

    

    
    <meta name="author" content="yhy" />
    

    
    <meta property="og:url" content="http://localhost:1313/posts/docker/">
  <meta property="og:site_name" content="笨鸟先飞">
  <meta property="og:title" content="CentOS 7安装Docker">
  <meta property="og:description" content="在CentOS 7上安装Docker">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2024-10-10T00:00:00+00:00">
    <meta property="article:modified_time" content="2024-10-17T06:13:02+08:00">

    

    
    
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="CentOS 7安装Docker">
  <meta name="twitter:description" content="在CentOS 7上安装Docker">

    <link rel="stylesheet" href="/style.css" integrity="">



    <link rel="stylesheet" href="/lib/css/prism.css" integrity="">


    
      <script async src="https://www.googletagmanager.com/gtag/js?id=G-EZS77WS4T3"></script>
      <script>
        var doNotTrack = false;
        if ( false ) {
          var dnt = (navigator.doNotTrack || window.doNotTrack || navigator.msDoNotTrack);
          var doNotTrack = (dnt == "1" || dnt == "yes");
        }
        if (!doNotTrack) {
          window.dataLayer = window.dataLayer || [];
          function gtag(){dataLayer.push(arguments);}
          gtag('js', new Date());
          gtag('config', 'G-EZS77WS4T3');
        }
      </script>
    

    
    <script>
        if (!('theme' in localStorage)) {
            localStorage.theme = 'dark';
        }

        if (localStorage.theme === 'dark' || (!('theme' in localStorage) && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
            document.documentElement.setAttribute("data-theme", "dark")
        } else {
            document.documentElement.setAttribute("data-theme", "light")
        }
    </script>
<script defer src="/js/header.js" integrity=""></script>



    <script defer src="/js/zooming.js" integrity=""></script>







    
        

        
        

        
        
            
        

        <script defer src="/js/prism.js" integrity="" data-manual></script>
    



    
    
    
    <script defer src="/js/search-zh-cn.js" integrity=""></script>




<link rel="stylesheet" href="http://localhost:1313/user.css">

    

    
</head>
<body><header>
    <div id="header_left">
        <div id="sidebar_btn">
            <input type="checkbox" id="sidebar_btn_input" class="hidden" />
            <label id="sidebar_btn_label" for="sidebar_btn_input">
                <svg id="menu_icon" width="26px" height="26px" viewBox="0 0 24 24">
<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24" height="24" viewBox="0 0 24 24" fill="none"
    stroke="currentColor" stroke-width="2" stroke-linecap="round"
    stroke-linejoin="round">
    <line x1="3" y1="12" x2="21" y2="12"></line><line x1="3" y1="6" x2="21" y2="6"></line><line x1="3" y1="18" x2="21" y2="18"></line>
</svg>

</svg>
            </label>
            <label id="sidebar_canvas_overlay_wrapper" for="sidebar_btn_input">
                <div id="sidebar_canvas_overlay"></div>
            </label>
            <div id="sidebar">
                <ul><li>
                        <a href="/posts/">文章</a></li><li>
                        <a href="/talks/">碎碎念</a></li><li>
                        <a href="/me/">关于</a></li></ul>
            </div>
        </div>

        <div class="brand">
            <div>
                <a href="/">笨鸟先飞</a>
            </div>
        </div>
    </div>

    <div class="toolbox">
        <div id="theme_tool">
            <svg id="dark_mode_btn" class="toolbox-btn" width="18px" height="18px" viewBox="0 0 24 24">
<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24" height="24" viewBox="0 0 24 24" fill="none"
    stroke="currentColor" stroke-width="2" stroke-linecap="round"
    stroke-linejoin="round">
    <circle cx="12" cy="12" r="5"></circle><line x1="12" y1="1" x2="12" y2="3"></line><line x1="12" y1="21" x2="12" y2="23"></line><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line><line x1="1" y1="12" x2="3" y2="12"></line><line x1="21" y1="12" x2="23" y2="12"></line><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
</svg>

</svg>
            <svg id="light_mode_btn" class="toolbox-btn" width="18px" height="18px" viewBox="0 0 24 24">
<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24" height="24" viewBox="0 0 24 24" fill="none"
    stroke="currentColor" stroke-width="2" stroke-linecap="round"
    stroke-linejoin="round">
    <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
</svg>

</svg>
        </div>

        
        <div id="search_tool">
            <svg id="search_btn" class="toolbox-btn" width="18px" height="18px" viewBox="0 0 24 24">
<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24" height="24" viewBox="0 0 24 24" fill="none"
    stroke="currentColor" stroke-width="2" stroke-linecap="round"
    stroke-linejoin="round">
    <circle cx="11" cy="11" r="8"></circle><line x1="21" y1="21" x2="16.65" y2="16.65"></line>
</svg>

</svg><div id="search_menu_wrapper" class="hidden">
    <div id="search_menu">
        <div id="search_menu_toolbar">
            <div id="search_menu_input_wrapper">
                <input id="search_menu_input" type="text" placeholder='搜索文章'>
            </div>
            <div id="search_menu_close_btn">
                <svg width="18px" height="18px" viewBox="0 0 24 24">
<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24" height="24" viewBox="0 0 24 24" fill="none"
    stroke="currentColor" stroke-width="2" stroke-linecap="round"
    stroke-linejoin="round">
    <line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line>
</svg>

</svg>
            </div>
        </div>
        <div id="search_menu_results">
        </div>
    </div>
</div>
</div>
        

        
    </div>
</header>
<nav id="navbar" class="pure-menu">
    <ul class="pure-menu-list"><li class="navbar-item pure-menu-item insection">
                    
                        <a href="/posts/" class="pure-menu-link">文章</a>
                    
                </li><li class="navbar-item pure-menu-item ">
                    
                        <a href="/talks/" class="pure-menu-link">碎碎念</a>
                    
                </li><li class="navbar-item pure-menu-item ">
                    
                        <a href="/me/" class="pure-menu-link">关于</a>
                    
                </li></ul>
</nav>
<main>
            <div id="content" class="content-margin">
                


<div class="content-margin">



<article >
    
    
        
        
    
    
<h1 id="centos7安装docker" class="header-anchor-wrapper">Centos7安装Docker
  <a href="#centos7%e5%ae%89%e8%a3%85docker" class="header-anchor-link">
    <svg width="16px" height="16px" viewBox="0 0 24 24">
<svg
    xmlns="http://www.w3.org/2000/svg"
    width="24" height="24" viewBox="0 0 24 24" fill="none"
    stroke="currentColor" stroke-width="2" stroke-linecap="round"
    stroke-linejoin="round">
    <line x1="4" y1="9" x2="20" y2="9"></line><line x1="4" y1="15" x2="20" y2="15"></line><line x1="10" y1="3" x2="8" y2="21"></line><line x1="16" y1="3" x2="14" y2="21"></line>
</svg>

</svg>
  </a>
</h1>

<hr>
<ol>
<li>如果之前有装过Docker,建议先卸载旧版本相关依赖</li>
</ol>
<pre  class="mc-prism hide language-text" ><code class="language-bash">sudo yum remove docker \
                docker-client \
                docker-client-latest \
                docker-common \
                docker-latest \
                docker-latest-logrotate \
                docker-logrotate \
                docker-engine
</code></pre>
<ol start="2">
<li>安装</li>
</ol>
<pre  class="mc-prism hide language-text" ><code class="language-bash"># step 1: 安装必要的一些系统工具
sudo yum install -y yum-utils device-mapper-persistent-data lvm2

# Step 2: 添加软件源信息
sudo yum-config-manager --add-repo http://mirrors.aliyun.com/docker-ce/linux/centos/docker-ce.repo

# Step 3: 更新并安装 Docker-CE
sudo yum makecache fast
sudo yum -y install docker-ce docker-ce-cli containerd.io

# Step 4: 开启Docker服务并设置它在系统启动时自动启动
sudo systemctl start docker
sudo systemctl enable docker

# Step 5: 验证 Docker 是否安装成功并查看其版本
docker --version
</code></pre>
<ol start="3">
<li>安装完成后，最新版自带了<code>docker compose</code>命令，可以无需安装<code>docker-compose</code></li>
<li>开启阿里云镜像加速（非必须）</li>
</ol>
<ul>
<li>进入<a href="https://aliyun.com/">阿里云控制台首页</a></li>
<li>进入管理控制台 -&gt; 登录账号 -&gt; 左上角控制台 -&gt; 产品与服务 -&gt; 容器 -&gt; 容器镜像服务 -&gt; 点击侧边栏镜像工具 -&gt; 镜像加速器 -&gt; 复制链接</li>
</ul>
<p><img alt="image-20241010235437889" src="https://yhyblog-2023-2-8.oss-cn-hangzhou.aliyuncs.com/md/2024/202410102354031.png"></p>
<p><img alt="image-20241010235331386" src="https://yhyblog-2023-2-8.oss-cn-hangzhou.aliyuncs.com/md/2024/202410102353167.png"></p>
<p><img alt="image-20241010235543013" src="https://yhyblog-2023-2-8.oss-cn-hangzhou.aliyuncs.com/md/2024/202410102355323.png"></p>
<ul>
<li>编辑 daemon 配置文件<code>vim /etc/docker/daemon.json</code>替换加速器地址保存</li>
</ul>
<pre  class="mc-prism hide language-text" ><code class="language-bash">{
  &quot;registry-mirrors&quot;: [&quot;https://**********.mirror.aliyuncs.com&quot;]
}
</code></pre>
<ul>
<li>重启 docker</li>
</ul>
<pre  class="mc-prism hide language-text" ><code class="language-bash">sudo systemctl daemon-reload
sudo systemctl restart docker
</code></pre>

</article>
</div>


                
                    
                    
                        <hr style="border: none; border-top: 1px solid #ddd; margin: 4rem 0 2rem 0;"><div class="giscus-wrapper">
<script>
        
        function setGiscusTheme() {
        const theme = localStorage.theme === 'dark' ? 'dark_dimmed' : 'light';
        const giscusScript = document.createElement('script');
        giscusScript.src = "https://giscus.app/client.js";
        giscusScript.setAttribute('data-repo', '1yhy/blog');
        giscusScript.setAttribute('data-repo-id', 'R_kgDOM_m8YA');
        giscusScript.setAttribute('data-category', 'Announcements');
        giscusScript.setAttribute('data-category-id', 'DIC_kwDOM_m8YM4CjUnL');
        giscusScript.setAttribute('data-mapping', 'pathname');
        giscusScript.setAttribute('data-strict', '0');
        giscusScript.setAttribute('data-reactions-enabled', '1');
        giscusScript.setAttribute('data-emit-metadata', '1');
        giscusScript.setAttribute('data-input-position', 'top');
        giscusScript.setAttribute('data-theme', theme);
        giscusScript.setAttribute('data-lang', 'zh-CN');
        giscusScript.setAttribute('data-loading', 'lazy');
        giscusScript.crossOrigin = 'anonymous';
        giscusScript.async = true;

        
        document.querySelector('.giscus-wrapper').appendChild(giscusScript);
        }

        
        setGiscusTheme();

        
        window.addEventListener('storage', function(event) {
        if (event.key === 'theme') {
                
                setGiscusTheme();
        }
        });
</script>
</div>

                
            </div>
        </main>
<footer>
    <article>Copyright © 2024 by yhy</article>
</footer>

</body>
</html>
